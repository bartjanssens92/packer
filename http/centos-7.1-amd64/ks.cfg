# Kickstart file automatically generated by anaconda.

install

# General settings
lang en_US.UTF-8
keyboard us
selinux --permissive
timezone Europe/Brussels

# Users
authconfig --useshadow --enablemd5
rootpw vagrant
user --name=vagrant --homedir=/home/vagrant --password=vagrant --shell=/bin/bash --uid=900 --groups wheel

# System services
services --disabled="ip6tables,netfs,haldaemon,messagebus,abrtd,abrt-ccpp,abrt-oops"

# Reboot after installation
reboot

# Open port 22 for ssh
firewall --port=22:tcp

bootloader --location=mbr --driveorder=vda --append="console=ttyS0 crashkernel=auto"

zerombr
clearpart --all --initlabel

part /boot --fstype=ext3 --size=200
part pv.253002 --grow --size=9000
volgroup vg_vagrant --pesize=32768 pv.253002
logvol / --fstype=ext4 --name=lv_root --vgname=vg_vagrant --grow --size=2048
logvol swap --name=lv_swap --vgname=vg_vagrant --size=2048
logvol /var --fstype=ext4 --name=lv_var --vgname=vg_vagrant --size=4096

repo --name="Centos - Base" --baseurl=http://mirror.centos.org/centos/7.1/os/x86_64/
repo --name="Centos - Extra" --baseurl=http://mirror.centos.org/centos/7.1/extras/x86_64/
repo --name="Epel - Epel" --baseurl=http://download.fedoraproject.org/pub/epel/7/x86_64/

%packages
@Base
@Core
@core
-ipw2100-firmware
-ipw2200-firmware
-ivtv-firmware
-networkmanager
-plymouth
-plymouth-core-libs
-plymouth-scripts
-redhat-logos
-system-config-network-tui

%end

%post

# Make sure that the vagrant user has sudo
echo "vagrant        ALL=(ALL)       NOPASSWD: ALL" >> /etc/sudoers
sed -i "s/^.*requiretty/#Defaults requiretty/" /etc/sudoers

# Have an up to date Centos
yum update -y

%end
